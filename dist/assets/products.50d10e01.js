import{_ as Q,B as W,L as X}from"./loading.26d99857.js";import{S as z,a as Y}from"./autoplay.min.856ed2b0.js";import{_ as F,d as $,f as D,o,c as r,b as u,a as l,w as n,u as O,F as w,r as I,D as f,h as m,B as N,E as U,j as g,G as y,p as M,e as j,I as Z,J as ee,K as R,L as te,y as ae,M as L,N as C,O as se}from"./index.583c14a6.js";import{p as oe}from"./product.6519fc19.js";const ue={class:"w-full"},ne={class:"p-2 my-2 border rounded-lg md:hidden"},re=m("\u5168\u90E8\u5546\u54C1"),le={class:"hidden p-2 my-2 border rounded-lg md:justify-around md:flex-center lg:flex-col lg:border-none lg:space-y-4"},ce=m("\u5168\u90E8\u5546\u54C1"),ie=$({__name:"Categroy",props:{categories:null,sortName:null,valueName:null},setup(e){return(v,c)=>{const t=D("router-link");return o(),r("main",ue,[u("section",ne,[l(O(Y),{breakpoints:{375:{slidesPerView:4,spaceBetween:0}}},{default:n(()=>[l(O(z),null,{default:n(()=>[l(t,{to:{name:"products"},class:"item"},{default:n(()=>[re]),_:1})]),_:1}),(o(!0),r(w,null,I(e.categories,a=>(o(),f(O(z),{key:a.id},{default:n(()=>[l(t,{to:{name:"products",query:{categoryId:a.id}},class:"item"},{default:n(()=>[m(N(a.name),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),u("section",le,[l(t,{to:{name:"products"},class:"item"},{default:n(()=>[ce]),_:1}),(o(!0),r(w,null,I(e.categories,a=>(o(),f(t,{key:a.id,to:{name:"products",query:{categoryId:a.id,sort:e.sortName,value:e.valueName}},class:"item"},{default:n(()=>[m(N(a.name),1)]),_:2},1032,["to"]))),128))])])}}}),de=F(ie,[["__scopeId","data-v-7ff675be"]]);const _e=e=>(M("data-v-78975488"),e=e(),j(),e),ge={class:"justify-between flex-center"},me={class:"text-xl"},ve={class:"space-x-2 text-sm flex-center"},pe=_e(()=>u("i",{class:"w-2.5 h-2.5 fa-solid fa-chevron-down"},null,-1)),ye=m("\u9810\u8A2D"),fe=m("\u4E0A\u67B6\u6642\u9593: \u7531\u65B0\u5230\u820A"),he=m("\u4E0A\u67B6\u6642\u9593: \u7531\u820A\u5230\u65B0"),xe=m("\u50F9\u683C: \u7531\u9AD8\u81F3\u4F4E"),Ce=m("\u50F9\u683C: \u7531\u4F4E\u81F3\u9AD8"),be=$({__name:"Sort",props:{categoryName:{type:String,default:"\u5168\u90E8\u5546\u54C1"}},setup(e){const v=U(),c=g(!1),t=g("\u5168\u90E8"),a=v.query;return a.value==="createdAt"?a.sort==="DESC"?t.value="\u4E0A\u67B6\u6642\u9593: \u7531\u65B0\u5230\u820A":t.value="\u4E0A\u67B6\u6642\u9593: \u7531\u820A\u5230\u65B0":a.value==="price"?a.sort==="DESC"?t.value="\u50F9\u683C: \u7531\u9AD8\u81F3\u4F4E":t.value="\u50F9\u683C: \u7531\u4F4E\u81F3\u9AD8":t.value="\u9810\u8A2D",(p,i)=>{const s=D("router-link");return o(),r("main",ge,[u("span",me,N(e.categoryName),1),u("div",{onMouseenter:i[0]||(i[0]=_=>c.value=!0),onMouseleave:i[1]||(i[1]=_=>c.value=!1),class:"relative"},[u("button",ve,[u("span",null,N(t.value),1),pe]),u("div",{class:y(["absolute z-10 hidden w-40 h-auto p-2 space-y-1 bg-white border shadow-md right-2",{open:c.value}])},[l(s,{to:"products",class:"item"},{default:n(()=>[ye]),_:1}),l(s,{to:{name:"products",query:{value:"createdAt",sort:"DESC"}},class:"item"},{default:n(()=>[fe]),_:1}),l(s,{to:{name:"products",query:{value:"createdAt",sort:"ASC"}},class:"item"},{default:n(()=>[he]),_:1}),l(s,{to:{name:"products",query:{value:"price",sort:"DESC"}},class:"item"},{default:n(()=>[xe]),_:1}),l(s,{to:{name:"products",query:{value:"price",sort:"ASC"}},class:"item"},{default:n(()=>[Ce]),_:1})],2)],32)])}}}),ke=F(be,[["__scopeId","data-v-78975488"]]);const T=e=>(M("data-v-3f7b1834"),e=e(),j(),e),we={class:"grid grid-cols-2 gap-3 mt-4 lg:grid-cols-3 justify-items-center xl:gap-8 xl:grid-cols-4 xl:px-14"},Ne=["onMouseenter","onMouseleave"],$e={src:Q,alt:""},Ae=["onClick"],Be=T(()=>u("div",{class:"h-10 p-2 bg-black w-44 md:w-56 opacity-30"},null,-1)),Pe=["onClick"],Se=T(()=>u("div",{class:"h-10 p-2 bg-black w-44 md:w-56 opacity-30"},null,-1)),Ee=$({__name:"Cards",props:{cards:null},setup(e){const v=e,c=Z(),t=ee(),a=R();v.cards.forEach(s=>{s.isOpen=!1});async function p(s){try{if(!c.currentUser)return a.error("\u8ACB\u5148\u767B\u5165"),t.push("/signIn");const{data:_}=await L.addCart(s.id);s.Cart={productCount:1},c.carts.push(s),s.isCart=!0}catch(_){console.log(_)}}async function i(s){try{const{data:_}=await L.deleteCart(s.id);c.carts=c.carts.filter(b=>b.id!==s.id),s.isCart=!1}catch(_){console.log(_)}}return(s,_)=>{const b=D("router-link"),h=te("src");return o(),r("main",we,[(o(!0),r(w,null,I(e.cards,d=>(o(),r("section",{key:d.id,class:"relative cursor-pointer",onMouseenter:k=>d.isOpen=!0,onMouseleave:k=>d.isOpen=!1},[l(b,{to:`/product/${d.id}`,class:"block overflow-hidden w-44 md:w-56 aspect-3/4"},{default:n(()=>[ae(u("img",$e,null,512),[[h,d.image]])]),_:2},1032,["to"]),d.isCart?(o(),r("div",{key:0,class:y(["absolute bottom-0 z-10 origin-bottom scale-y-0 opacity-0 cursor-pointer flex-center hover:bg-black",{ani:d.isOpen}]),onClick:k=>i(d)},[Be,u("span",{class:y(["absolute text-white opacity-0",{showtext:d.isOpen}])},"\u79FB\u9664\u8CFC\u7269\u8ECA",2)],10,Ae)):(o(),r("div",{key:1,class:y(["absolute bottom-0 z-10 origin-bottom scale-y-0 opacity-0 cursor-pointer flex-center hover:bg-black",{ani:d.isOpen}]),onClick:k=>p(d)},[Se,u("span",{class:y(["absolute text-white opacity-0",{showtext:d.isOpen}])},"\u52A0\u5165\u8CFC\u7269\u8ECA",2)],10,Pe))],40,Ne))),128))])}}}),Ie=F(Ee,[["__scopeId","data-v-3f7b1834"]]);const G=e=>(M("data-v-2b248c1b"),e=e(),j(),e),Fe={"aria-label":"Page navigation example"},De={class:"pagination"},qe=G(()=>u("span",{"aria-hidden":"true"},"\xAB",-1)),Oe=G(()=>u("span",{"aria-hidden":"true"},"\xBB",-1)),Me=$({__name:"Pagination",props:{categoryNum:{type:String},currentPage:{type:Number,default:1},totalPage:{type:Array},previousPage:{type:Number},nextPage:{type:Number},sortName:{type:String},valueName:{type:String}},setup(e){return(v,c)=>{var a,p;const t=D("router-link");return o(),r("nav",Fe,[u("ul",De,[e.currentPage!==1?(o(),r("li",{key:0,class:y(["page-item",{disabled:e.currentPage===1}])},[l(t,{class:"page-link","aria-label":"Previous",to:{name:"products",query:{page:e.previousPage,categoryId:e.categoryNum,sort:e.sortName,value:e.valueName}}},{default:n(()=>[qe]),_:1},8,["to"])],2)):C("",!0),(o(!0),r(w,null,I(e.totalPage,(i,s)=>(o(),r("li",{class:y(["page-item",{active:e.currentPage===i}]),key:s},[l(t,{class:"page-link",to:{name:"products",query:{page:i,categoryId:e.categoryNum,sort:e.sortName,value:e.valueName}}},{default:n(()=>[m(N(i),1)]),_:2},1032,["to"])],2))),128)),e.currentPage!==((a=e.totalPage)==null?void 0:a.length)?(o(),r("li",{key:1,class:y(["page-item",{disabled:e.currentPage===((p=e.totalPage)==null?void 0:p.length)}])},[l(t,{class:"page-link","aria-label":"Next",to:{name:"products",query:{page:e.nextPage,categoryId:e.categoryNum,sort:e.sortName,value:e.valueName}}},{default:n(()=>[Oe]),_:1},8,["to"])],2)):C("",!0)])])}}}),je=F(Me,[["__scopeId","data-v-2b248c1b"]]),Ve={class:"flex flex-col px-4 bg-white lg:px-10 lg:py-10 lg:flex-row"},ze={class:"justify-start lg:flex-col lg:w-1/5 flex-center"},Le={class:"flex-1"},Ue={class:"space-y-20"},Ke=$({__name:"products",setup(e){const v=U(),c=g(),t=g(),a=g(),p=g(),i=g(),s=g(),_=g(),b=R(),h=g(!0),{page:d="",categoryId:k="",sort:J="",value:K=""}=v.query;V(d,k,J,K);async function V(A,B,P,S){try{h.value=!0;const{data:x}=await oe.getProducts(A,B,P,S);c.value=x.data.data,t.value=x.data.pagination,a.value=x.data.categories,p.value=B,i.value=P,s.value=S;const q=Number(v.query.categoryId),E=a.value.find(H=>H.id===q);E?_.value=E.name:_.value="\u5168\u90E8\u5546\u54C1",h.value=!1}catch{h.value=!1,b.error("\u7CFB\u7D71\u932F\u8AA4\u8ACB\u7A0D\u5019\u518D\u8A66")}}return se((A,B,P)=>{const{page:S="",categoryId:x="",sort:q="",value:E=""}=A.query;V(S,x,q,E),P()}),(A,B)=>h.value?(o(),f(X,{key:0})):(o(),r(w,{key:1},[l(W),u("main",Ve,[u("section",ze,[a.value?(o(),f(de,{key:0,categories:a.value,"sort-name":i.value,"value-name":s.value},null,8,["categories","sort-name","value-name"])):C("",!0)]),u("section",Le,[a.value?(o(),f(ke,{key:0,"category-name":_.value},null,8,["category-name"])):C("",!0),u("div",Ue,[c.value?(o(),f(Ie,{key:0,cards:c.value},null,8,["cards"])):C("",!0),t.value&&t.value.pages.length>1?(o(),f(je,{key:1,"category-num":p.value,"current-page":t.value.currentPage,"total-page":t.value.pages,"previous-page":t.value.prev,"next-page":t.value.next,"sort-name":i.value,"value-name":s.value},null,8,["category-num","current-page","total-page","previous-page","next-page","sort-name","value-name"])):C("",!0)])])])],64))}});export{Ke as default};
